Return-Path: <linux-can-owner@vger.kernel.org>
X-Original-To: lists+linux-can@lfdr.de
Delivered-To: lists+linux-can@lfdr.de
Received: from vger.kernel.org (vger.kernel.org [209.132.180.67])
	by mail.lfdr.de (Postfix) with ESMTP id 51E521980A
	for <lists+linux-can@lfdr.de>; Fri, 10 May 2019 07:28:31 +0200 (CEST)
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
        id S1726657AbfEJF2a (ORCPT <rfc822;lists+linux-can@lfdr.de>);
        Fri, 10 May 2019 01:28:30 -0400
Received: from mail-eopbgr80071.outbound.protection.outlook.com ([40.107.8.71]:53838
        "EHLO EUR04-VI1-obe.outbound.protection.outlook.com"
        rhost-flags-OK-OK-OK-FAIL) by vger.kernel.org with ESMTP
        id S1726284AbfEJF2a (ORCPT <rfc822;linux-can@vger.kernel.org>);
        Fri, 10 May 2019 01:28:30 -0400
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=nxp.com; s=selector2;
 h=From:Date:Subject:Message-ID:Content-Type:MIME-Version:X-MS-Exchange-SenderADCheck;
 bh=ZlXlTg84FFykhitEtjyWctUB+qjQP/KrsXMDKnEh7eM=;
 b=rJic0HqdJeAaglL1HJHOC/DYXCo294xnpVwuKtTDjncWIrI1fL2Yas/ctGhj8ufwPbJ8GdvgoBeVAUIT7L6L81bc560AtRhKbWJHoOqn1xORyuK6MgSHSjDrhzln4Frifgh6eNsUToh1q3jPgtO1tWXtvHP0UDHjkZL2XVuIsrw=
Received: from VI1PR0401MB2496.eurprd04.prod.outlook.com (10.168.65.10) by
 VI1PR0401MB2334.eurprd04.prod.outlook.com (10.169.133.149) with Microsoft
 SMTP Server (version=TLS1_2, cipher=TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384) id
 15.20.1878.21; Fri, 10 May 2019 05:28:20 +0000
Received: from VI1PR0401MB2496.eurprd04.prod.outlook.com
 ([fe80::5e3:7122:7d0e:7fb7]) by VI1PR0401MB2496.eurprd04.prod.outlook.com
 ([fe80::5e3:7122:7d0e:7fb7%3]) with mapi id 15.20.1878.019; Fri, 10 May 2019
 05:28:20 +0000
From:   Pankaj Bansal <pankaj.bansal@nxp.com>
To:     Wolfgang Grandegger <wg@grandegger.com>,
        Marc Kleine-Budde <mkl@pengutronix.de>
CC:     "linux-can@vger.kernel.org" <linux-can@vger.kernel.org>,
        Pankaj Bansal <pankaj.bansal@nxp.com>
Subject: [PATCH 1/4] net: can: flexcan: use CAN FD frames for Tx/Rx
Thread-Topic: [PATCH 1/4] net: can: flexcan: use CAN FD frames for Tx/Rx
Thread-Index: AQHVBvEtXKYeK1YP+0aLH/fd3K5eSA==
Date:   Fri, 10 May 2019 05:28:20 +0000
Message-ID: <20190510105137.27523-2-pankaj.bansal@nxp.com>
References: <20190510105137.27523-1-pankaj.bansal@nxp.com>
In-Reply-To: <20190510105137.27523-1-pankaj.bansal@nxp.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
x-clientproxiedby: TY1PR01CA0149.jpnprd01.prod.outlook.com
 (2603:1096:402:1::25) To VI1PR0401MB2496.eurprd04.prod.outlook.com
 (2603:10a6:800:56::10)
x-mailer: git-send-email 2.17.1
authentication-results: spf=none (sender IP is )
 smtp.mailfrom=pankaj.bansal@nxp.com; 
x-ms-exchange-messagesentrepresentingtype: 1
x-originating-ip: [92.120.1.69]
x-ms-publictraffictype: Email
x-ms-office365-filtering-correlation-id: c99346b3-ccb5-4034-1b27-08d6d5085035
x-ms-office365-filtering-ht: Tenant
x-microsoft-antispam: BCL:0;PCL:0;RULEID:(2390118)(7020095)(4652040)(8989299)(4534185)(4627221)(201703031133081)(201702281549075)(8990200)(5600141)(711020)(4605104)(4618075)(2017052603328)(7193020);SRVR:VI1PR0401MB2334;
x-ms-traffictypediagnostic: VI1PR0401MB2334:
x-microsoft-antispam-prvs: <VI1PR0401MB23340D1B3DA3A85C261F8F37F10C0@VI1PR0401MB2334.eurprd04.prod.outlook.com>
x-ms-oob-tlc-oobclassifiers: OLM:2887;
x-forefront-prvs: 0033AAD26D
x-forefront-antispam-report: SFV:NSPM;SFS:(10009020)(136003)(396003)(346002)(366004)(39860400002)(376002)(189003)(199004)(66556008)(52116002)(66946007)(305945005)(99286004)(66476007)(66446008)(2906002)(7736002)(53936002)(6512007)(6486002)(76176011)(50226002)(73956011)(256004)(6436002)(71200400001)(71190400001)(14444005)(66066001)(68736007)(54906003)(110136005)(486006)(186003)(5660300002)(14454004)(44832011)(102836004)(86362001)(6116002)(3846002)(64756008)(81156014)(478600001)(81166006)(386003)(8936002)(316002)(6506007)(4326008)(1076003)(8676002)(11346002)(446003)(26005)(2616005)(36756003)(25786009)(476003);DIR:OUT;SFP:1101;SCL:1;SRVR:VI1PR0401MB2334;H:VI1PR0401MB2496.eurprd04.prod.outlook.com;FPR:;SPF:None;LANG:en;PTR:InfoNoRecords;MX:1;A:1;
received-spf: None (protection.outlook.com: nxp.com does not designate
 permitted sender hosts)
x-ms-exchange-senderadcheck: 1
x-microsoft-antispam-message-info: Tfz5fexKrcFJM+/r0BIncLGcUUzbxyHaH3ICDTbDeRyfIYl5sREMkaDTGq1HWC6uf9GjDFU5NellyMLhaZY/HL3/8wOY8cUvWoZYDND1OIb2FQJEPvAIucVMDOH2Djo97aB4KN6oj3AXfBBcpTgK6Vy991ktNvmnrAFZJSkCQgokVhk/h4eHU+uO5TP0RwtNBc0JoPg1lfqADYps+B0Nqnueq3vivh0sXHSQO5jYkiYMt+sMx570Kp0GwBrQWbVxOZQb8HjzKYdS4U8eE3MVGfziW691u3DggD6p8B3rwbHrS3HMm3ndzL/ml5kjyVIOaW37gKuOLyrhHomsycF/EAcpZWR3Q6kFQdQOw44YmfIHoa8CFkmMfS58qjUmAqWZzacbStK53tirLGwyKmhyXEM5TMwtNPOXCIUg1HQgB8Q=
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
MIME-Version: 1.0
X-OriginatorOrg: nxp.com
X-MS-Exchange-CrossTenant-Network-Message-Id: c99346b3-ccb5-4034-1b27-08d6d5085035
X-MS-Exchange-CrossTenant-originalarrivaltime: 10 May 2019 05:28:20.6300
 (UTC)
X-MS-Exchange-CrossTenant-fromentityheader: Hosted
X-MS-Exchange-CrossTenant-id: 686ea1d3-bc2b-4c6f-a92c-d99c5c301635
X-MS-Exchange-CrossTenant-mailboxtype: HOSTED
X-MS-Exchange-Transport-CrossTenantHeadersStamped: VI1PR0401MB2334
Sender: linux-can-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-can.vger.kernel.org>
X-Mailing-List: linux-can@vger.kernel.org

VXNlIGNhbiBGRCBmcmFtZXMgZm9yIFR4L1J4IG9wZXJhdGlvbnMuIFRoaXMgd291bGQgYmUgbmVl
ZGVkIGluIHVwY29taW5nDQpTT0MgTFgyMTYwQSwgd2hpY2ggc3VwcG9ydHMgQ0FOIEZEIHByb3Rv
Y29sDQoNClNpZ25lZC1vZmYtYnk6IFBhbmthaiBCYW5zYWwgPHBhbmthai5iYW5zYWxAbnhwLmNv
bT4NCi0tLQ0KIGRyaXZlcnMvbmV0L2Nhbi9mbGV4Y2FuLmMgICAgICB8IDM2ICsrKysrKysrKysr
KysrKysrKystLS0tLS0tLS0tLS0tDQogZHJpdmVycy9uZXQvY2FuL3J4LW9mZmxvYWQuYyAgIHwg
MzIgKysrKysrKysrKysrKysrKysrKysrLS0tLS0tLQ0KIGluY2x1ZGUvbGludXgvY2FuL3J4LW9m
ZmxvYWQuaCB8ICA2ICsrKysrLQ0KIDMgZmlsZXMgY2hhbmdlZCwgNTAgaW5zZXJ0aW9ucygrKSwg
MjQgZGVsZXRpb25zKC0pDQoNCmRpZmYgLS1naXQgYS9kcml2ZXJzL25ldC9jYW4vZmxleGNhbi5j
IGIvZHJpdmVycy9uZXQvY2FuL2ZsZXhjYW4uYw0KaW5kZXggMWM2NmZiMmFkNzZiLi4yYzVhZDE5
NGI1OTMgMTAwNjQ0DQotLS0gYS9kcml2ZXJzL25ldC9jYW4vZmxleGNhbi5jDQorKysgYi9kcml2
ZXJzL25ldC9jYW4vZmxleGNhbi5jDQpAQCAtNTkwLDEwICs1OTAsMTAgQEAgc3RhdGljIGludCBm
bGV4Y2FuX2dldF9iZXJyX2NvdW50ZXIoY29uc3Qgc3RydWN0IG5ldF9kZXZpY2UgKmRldiwNCiBz
dGF0aWMgbmV0ZGV2X3R4X3QgZmxleGNhbl9zdGFydF94bWl0KHN0cnVjdCBza19idWZmICpza2Is
IHN0cnVjdCBuZXRfZGV2aWNlICpkZXYpDQogew0KIAljb25zdCBzdHJ1Y3QgZmxleGNhbl9wcml2
ICpwcml2ID0gbmV0ZGV2X3ByaXYoZGV2KTsNCi0Jc3RydWN0IGNhbl9mcmFtZSAqY2YgPSAoc3Ry
dWN0IGNhbl9mcmFtZSAqKXNrYi0+ZGF0YTsNCisJc3RydWN0IGNhbmZkX2ZyYW1lICpjZmQgPSAo
c3RydWN0IGNhbmZkX2ZyYW1lICopc2tiLT5kYXRhOw0KIAl1MzIgY2FuX2lkOw0KIAl1MzIgZGF0
YTsNCi0JdTMyIGN0cmwgPSBGTEVYQ0FOX01CX0NPREVfVFhfREFUQSB8IChjZi0+Y2FuX2RsYyA8
PCAxNik7DQorCXUzMiBjdHJsID0gRkxFWENBTl9NQl9DT0RFX1RYX0RBVEEgfCAoY2FuX2xlbjJk
bGMoY2ZkLT5sZW4pIDw8IDE2KTsNCiAJaW50IGk7DQogDQogCWlmIChjYW5fZHJvcHBlZF9pbnZh
bGlkX3NrYihkZXYsIHNrYikpDQpAQCAtNjAxLDE4ICs2MDEsMTggQEAgc3RhdGljIG5ldGRldl90
eF90IGZsZXhjYW5fc3RhcnRfeG1pdChzdHJ1Y3Qgc2tfYnVmZiAqc2tiLCBzdHJ1Y3QgbmV0X2Rl
dmljZSAqZGUNCiANCiAJbmV0aWZfc3RvcF9xdWV1ZShkZXYpOw0KIA0KLQlpZiAoY2YtPmNhbl9p
ZCAmIENBTl9FRkZfRkxBRykgew0KLQkJY2FuX2lkID0gY2YtPmNhbl9pZCAmIENBTl9FRkZfTUFT
SzsNCisJaWYgKGNmZC0+Y2FuX2lkICYgQ0FOX0VGRl9GTEFHKSB7DQorCQljYW5faWQgPSBjZmQt
PmNhbl9pZCAmIENBTl9FRkZfTUFTSzsNCiAJCWN0cmwgfD0gRkxFWENBTl9NQl9DTlRfSURFIHwg
RkxFWENBTl9NQl9DTlRfU1JSOw0KIAl9IGVsc2Ugew0KLQkJY2FuX2lkID0gKGNmLT5jYW5faWQg
JiBDQU5fU0ZGX01BU0spIDw8IDE4Ow0KKwkJY2FuX2lkID0gKGNmZC0+Y2FuX2lkICYgQ0FOX1NG
Rl9NQVNLKSA8PCAxODsNCiAJfQ0KIA0KLQlpZiAoY2YtPmNhbl9pZCAmIENBTl9SVFJfRkxBRykN
CisJaWYgKCFjYW5faXNfY2FuZmRfc2tiKHNrYikgJiYgKGNmZC0+Y2FuX2lkICYgQ0FOX1JUUl9G
TEFHKSkNCiAJCWN0cmwgfD0gRkxFWENBTl9NQl9DTlRfUlRSOw0KIA0KLQlmb3IgKGkgPSAwOyBp
IDwgY2YtPmNhbl9kbGM7IGkgKz0gc2l6ZW9mKHUzMikpIHsNCi0JCWRhdGEgPSBiZTMyX3RvX2Nw
dXAoKF9fYmUzMiAqKSZjZi0+ZGF0YVtpXSk7DQorCWZvciAoaSA9IDA7IGkgPCBjYW5fbGVuMmRs
YyhjZmQtPmxlbik7IGkgKz0gc2l6ZW9mKHUzMikpIHsNCisJCWRhdGEgPSBiZTMyX3RvX2NwdXAo
KF9fYmUzMiAqKSZjZmQtPmRhdGFbaV0pOw0KIAkJcHJpdi0+d3JpdGUoZGF0YSwgJnByaXYtPnR4
X21iLT5kYXRhW2kgLyBzaXplb2YodTMyKV0pOw0KIAl9DQogDQpAQCAtNzQxLDEyICs3NDEsMTMg
QEAgc3RhdGljIGlubGluZSBzdHJ1Y3QgZmxleGNhbl9wcml2ICpyeF9vZmZsb2FkX3RvX3ByaXYo
c3RydWN0IGNhbl9yeF9vZmZsb2FkICpvZmYNCiB9DQogDQogc3RhdGljIHVuc2lnbmVkIGludCBm
bGV4Y2FuX21haWxib3hfcmVhZChzdHJ1Y3QgY2FuX3J4X29mZmxvYWQgKm9mZmxvYWQsDQotCQkJ
CQkgc3RydWN0IGNhbl9mcmFtZSAqY2YsDQorCQkJCQkgc3RydWN0IHNrX2J1ZmYgKnNrYiwNCiAJ
CQkJCSB1MzIgKnRpbWVzdGFtcCwgdW5zaWduZWQgaW50IG4pDQogew0KIAlzdHJ1Y3QgZmxleGNh
bl9wcml2ICpwcml2ID0gcnhfb2ZmbG9hZF90b19wcml2KG9mZmxvYWQpOw0KIAlzdHJ1Y3QgZmxl
eGNhbl9yZWdzIF9faW9tZW0gKnJlZ3MgPSBwcml2LT5yZWdzOw0KIAlzdHJ1Y3QgZmxleGNhbl9t
YiBfX2lvbWVtICptYjsNCisJc3RydWN0IGNhbmZkX2ZyYW1lICpjZmQgPSAoc3RydWN0IGNhbmZk
X2ZyYW1lICopc2tiLT5kYXRhOw0KIAl1MzIgcmVnX2N0cmwsIHJlZ19pZCwgcmVnX2lmbGFnMTsN
CiAJaW50IGk7DQogDQpAQCAtNzgzLDE3ICs3ODQsMjEgQEAgc3RhdGljIHVuc2lnbmVkIGludCBm
bGV4Y2FuX21haWxib3hfcmVhZChzdHJ1Y3QgY2FuX3J4X29mZmxvYWQgKm9mZmxvYWQsDQogDQog
CXJlZ19pZCA9IHByaXYtPnJlYWQoJm1iLT5jYW5faWQpOw0KIAlpZiAocmVnX2N0cmwgJiBGTEVY
Q0FOX01CX0NOVF9JREUpDQotCQljZi0+Y2FuX2lkID0gKChyZWdfaWQgPj4gMCkgJiBDQU5fRUZG
X01BU0spIHwgQ0FOX0VGRl9GTEFHOw0KKwkJY2ZkLT5jYW5faWQgPSAoKHJlZ19pZCA+PiAwKSAm
IENBTl9FRkZfTUFTSykgfCBDQU5fRUZGX0ZMQUc7DQogCWVsc2UNCi0JCWNmLT5jYW5faWQgPSAo
cmVnX2lkID4+IDE4KSAmIENBTl9TRkZfTUFTSzsNCisJCWNmZC0+Y2FuX2lkID0gKHJlZ19pZCA+
PiAxOCkgJiBDQU5fU0ZGX01BU0s7DQogDQogCWlmIChyZWdfY3RybCAmIEZMRVhDQU5fTUJfQ05U
X1JUUikNCi0JCWNmLT5jYW5faWQgfD0gQ0FOX1JUUl9GTEFHOw0KLQljZi0+Y2FuX2RsYyA9IGdl
dF9jYW5fZGxjKChyZWdfY3RybCA+PiAxNikgJiAweGYpOw0KKwkJY2ZkLT5jYW5faWQgfD0gQ0FO
X1JUUl9GTEFHOw0KIA0KLQlmb3IgKGkgPSAwOyBpIDwgY2YtPmNhbl9kbGM7IGkgKz0gc2l6ZW9m
KHUzMikpIHsNCisJaWYgKGNhbl9pc19jYW5mZF9za2Ioc2tiKSkNCisJCWNmZC0+bGVuID0gY2Fu
X2RsYzJsZW4oZ2V0X2NhbmZkX2RsYygocmVnX2N0cmwgPj4gMTYpICYgMHhmKSk7DQorCWVsc2UN
CisJCWNmZC0+bGVuID0gZ2V0X2Nhbl9kbGMoKHJlZ19jdHJsID4+IDE2KSAmIDB4Zik7DQorDQor
CWZvciAoaSA9IDA7IGkgPCBjZmQtPmxlbjsgaSArPSBzaXplb2YodTMyKSkgew0KIAkJX19iZTMy
IGRhdGEgPSBjcHVfdG9fYmUzMihwcml2LT5yZWFkKCZtYi0+ZGF0YVtpIC8gc2l6ZW9mKHUzMild
KSk7DQotCQkqKF9fYmUzMiAqKShjZi0+ZGF0YSArIGkpID0gZGF0YTsNCisJCSooX19iZTMyICop
KGNmZC0+ZGF0YSArIGkpID0gZGF0YTsNCiAJfQ0KIA0KIAkvKiBtYXJrIGFzIHJlYWQgKi8NCkBA
IC0xMjQ3LDYgKzEyNTIsNyBAQCBzdGF0aWMgaW50IGZsZXhjYW5fb3BlbihzdHJ1Y3QgbmV0X2Rl
dmljZSAqZGV2KQ0KIAlwcml2LT5yZWdfaW1hc2sxX2RlZmF1bHQgPSAwOw0KIAlwcml2LT5yZWdf
aW1hc2syX2RlZmF1bHQgPSBGTEVYQ0FOX0lGTEFHX01CKHByaXYtPnR4X21iX2lkeCk7DQogDQor
CXByaXYtPm9mZmxvYWQuZmRfZW5hYmxlID0gZmFsc2U7DQogCXByaXYtPm9mZmxvYWQubWFpbGJv
eF9yZWFkID0gZmxleGNhbl9tYWlsYm94X3JlYWQ7DQogDQogCWlmIChwcml2LT5kZXZ0eXBlX2Rh
dGEtPnF1aXJrcyAmIEZMRVhDQU5fUVVJUktfVVNFX09GRl9USU1FU1RBTVApIHsNCmRpZmYgLS1n
aXQgYS9kcml2ZXJzL25ldC9jYW4vcngtb2ZmbG9hZC5jIGIvZHJpdmVycy9uZXQvY2FuL3J4LW9m
ZmxvYWQuYw0KaW5kZXggMmNlNGZhODY5OGM3Li41NTZiMjgwYWE0NmMgMTAwNjQ0DQotLS0gYS9k
cml2ZXJzL25ldC9jYW4vcngtb2ZmbG9hZC5jDQorKysgYi9kcml2ZXJzL25ldC9jYW4vcngtb2Zm
bG9hZC5jDQpAQCAtNTUsMTEgKzU1LDExIEBAIHN0YXRpYyBpbnQgY2FuX3J4X29mZmxvYWRfbmFw
aV9wb2xsKHN0cnVjdCBuYXBpX3N0cnVjdCAqbmFwaSwgaW50IHF1b3RhKQ0KIA0KIAl3aGlsZSAo
KHdvcmtfZG9uZSA8IHF1b3RhKSAmJg0KIAkgICAgICAgKHNrYiA9IHNrYl9kZXF1ZXVlKCZvZmZs
b2FkLT5za2JfcXVldWUpKSkgew0KLQkJc3RydWN0IGNhbl9mcmFtZSAqY2YgPSAoc3RydWN0IGNh
bl9mcmFtZSAqKXNrYi0+ZGF0YTsNCisJCXN0cnVjdCBjYW5mZF9mcmFtZSAqY2ZkID0gKHN0cnVj
dCBjYW5mZF9mcmFtZSAqKXNrYi0+ZGF0YTsNCiANCiAJCXdvcmtfZG9uZSsrOw0KIAkJc3RhdHMt
PnJ4X3BhY2tldHMrKzsNCi0JCXN0YXRzLT5yeF9ieXRlcyArPSBjZi0+Y2FuX2RsYzsNCisJCXN0
YXRzLT5yeF9ieXRlcyArPSBjZmQtPmxlbjsNCiAJCW5ldGlmX3JlY2VpdmVfc2tiKHNrYik7DQog
CX0NCiANCkBAIC0xMjIsMTkgKzEyMiwyMyBAQCBzdGF0aWMgc3RydWN0IHNrX2J1ZmYgKmNhbl9y
eF9vZmZsb2FkX29mZmxvYWRfb25lKHN0cnVjdCBjYW5fcnhfb2ZmbG9hZCAqb2ZmbG9hZA0KIHsN
CiAJc3RydWN0IHNrX2J1ZmYgKnNrYiA9IE5VTEw7DQogCXN0cnVjdCBjYW5fcnhfb2ZmbG9hZF9j
YiAqY2I7DQotCXN0cnVjdCBjYW5fZnJhbWUgKmNmOw0KKwlzdHJ1Y3QgY2FuZmRfZnJhbWUgKmNm
ZDsNCiAJaW50IHJldDsNCiANCiAJLyogSWYgcXVldWUgaXMgZnVsbCBvciBza2Igbm90IGF2YWls
YWJsZSwgcmVhZCB0byBkaXNjYXJkIG1haWxib3ggKi8NCiAJaWYgKGxpa2VseShza2JfcXVldWVf
bGVuKCZvZmZsb2FkLT5za2JfcXVldWUpIDw9DQotCQkgICBvZmZsb2FkLT5za2JfcXVldWVfbGVu
X21heCkpDQotCQlza2IgPSBhbGxvY19jYW5fc2tiKG9mZmxvYWQtPmRldiwgJmNmKTsNCisJCSAg
IG9mZmxvYWQtPnNrYl9xdWV1ZV9sZW5fbWF4KSkgew0KKwkJaWYgKG9mZmxvYWQtPmZkX2VuYWJs
ZSkNCisJCQlza2IgPSBhbGxvY19jYW5mZF9za2Iob2ZmbG9hZC0+ZGV2LCAmY2ZkKTsNCisJCWVs
c2UNCisJCQlza2IgPSBhbGxvY19jYW5fc2tiKG9mZmxvYWQtPmRldiwNCisJCQkJCSAgICAoc3Ry
dWN0IGNhbl9mcmFtZSAqKikmY2ZkKTsNCisJfQ0KIA0KIAlpZiAoIXNrYikgew0KLQkJc3RydWN0
IGNhbl9mcmFtZSBjZl9vdmVyZmxvdzsNCiAJCXUzMiB0aW1lc3RhbXA7DQogDQotCQlyZXQgPSBv
ZmZsb2FkLT5tYWlsYm94X3JlYWQob2ZmbG9hZCwgJmNmX292ZXJmbG93LA0KKwkJcmV0ID0gb2Zm
bG9hZC0+bWFpbGJveF9yZWFkKG9mZmxvYWQsIG9mZmxvYWQtPnNrYl9vdmVyZmxvdywNCiAJCQkJ
CSAgICAmdGltZXN0YW1wLCBuKTsNCiAJCWlmIChyZXQpDQogCQkJb2ZmbG9hZC0+ZGV2LT5zdGF0
cy5yeF9kcm9wcGVkKys7DQpAQCAtMTQzLDcgKzE0Nyw3IEBAIHN0YXRpYyBzdHJ1Y3Qgc2tfYnVm
ZiAqY2FuX3J4X29mZmxvYWRfb2ZmbG9hZF9vbmUoc3RydWN0IGNhbl9yeF9vZmZsb2FkICpvZmZs
b2FkDQogCX0NCiANCiAJY2IgPSBjYW5fcnhfb2ZmbG9hZF9nZXRfY2Ioc2tiKTsNCi0JcmV0ID0g
b2ZmbG9hZC0+bWFpbGJveF9yZWFkKG9mZmxvYWQsIGNmLCAmY2ItPnRpbWVzdGFtcCwgbik7DQor
CXJldCA9IG9mZmxvYWQtPm1haWxib3hfcmVhZChvZmZsb2FkLCBza2IsICZjYi0+dGltZXN0YW1w
LCBuKTsNCiAJaWYgKCFyZXQpIHsNCiAJCWtmcmVlX3NrYihza2IpOw0KIAkJcmV0dXJuIE5VTEw7
DQpAQCAtMjczLDYgKzI3Nyw4IEBAIEVYUE9SVF9TWU1CT0xfR1BMKGNhbl9yeF9vZmZsb2FkX3F1
ZXVlX3RhaWwpOw0KIA0KIHN0YXRpYyBpbnQgY2FuX3J4X29mZmxvYWRfaW5pdF9xdWV1ZShzdHJ1
Y3QgbmV0X2RldmljZSAqZGV2LCBzdHJ1Y3QgY2FuX3J4X29mZmxvYWQgKm9mZmxvYWQsIHVuc2ln
bmVkIGludCB3ZWlnaHQpDQogew0KKwlzdHJ1Y3QgY2FuZmRfZnJhbWUgKmNmZDsNCisNCiAJb2Zm
bG9hZC0+ZGV2ID0gZGV2Ow0KIA0KIAkvKiBMaW1pdCBxdWV1ZSBsZW4gdG8gNHggdGhlIHdlaWdo
dCAocm91bnRlZCB0byBuZXh0IHBvd2VyIG9mIHR3bykgKi8NCkBAIC0yODYsNiArMjkyLDE1IEBA
IHN0YXRpYyBpbnQgY2FuX3J4X29mZmxvYWRfaW5pdF9xdWV1ZShzdHJ1Y3QgbmV0X2RldmljZSAq
ZGV2LCBzdHJ1Y3QgY2FuX3J4X29mZmxvDQogCWRldl9kYmcoZGV2LT5kZXYucGFyZW50LCAiJXM6
IHNrYl9xdWV1ZV9sZW5fbWF4PSVkXG4iLA0KIAkJX19mdW5jX18sIG9mZmxvYWQtPnNrYl9xdWV1
ZV9sZW5fbWF4KTsNCiANCisJaWYgKG9mZmxvYWQtPmZkX2VuYWJsZSkNCisJCW9mZmxvYWQtPnNr
Yl9vdmVyZmxvdyA9IGFsbG9jX2NhbmZkX3NrYihvZmZsb2FkLT5kZXYsICZjZmQpOw0KKwllbHNl
DQorCQlvZmZsb2FkLT5za2Jfb3ZlcmZsb3cgPSBhbGxvY19jYW5fc2tiKG9mZmxvYWQtPmRldiwN
CisJCQkJCQkgICAgICAoc3RydWN0IGNhbl9mcmFtZSAqKikmY2ZkKTsNCisNCisJaWYgKHVubGlr
ZWx5KCFvZmZsb2FkLT5za2Jfb3ZlcmZsb3cpKQ0KKwkJcmV0dXJuIC1FTk9NRU07DQorDQogCXJl
dHVybiAwOw0KIH0NCiANCkBAIC0zMjksNiArMzQ0LDcgQEAgdm9pZCBjYW5fcnhfb2ZmbG9hZF9k
ZWwoc3RydWN0IGNhbl9yeF9vZmZsb2FkICpvZmZsb2FkKQ0KIHsNCiAJbmV0aWZfbmFwaV9kZWwo
Jm9mZmxvYWQtPm5hcGkpOw0KIAlza2JfcXVldWVfcHVyZ2UoJm9mZmxvYWQtPnNrYl9xdWV1ZSk7
DQorCWtmcmVlX3NrYihvZmZsb2FkLT5za2Jfb3ZlcmZsb3cpOw0KIH0NCiBFWFBPUlRfU1lNQk9M
X0dQTChjYW5fcnhfb2ZmbG9hZF9kZWwpOw0KIA0KZGlmZiAtLWdpdCBhL2luY2x1ZGUvbGludXgv
Y2FuL3J4LW9mZmxvYWQuaCBiL2luY2x1ZGUvbGludXgvY2FuL3J4LW9mZmxvYWQuaA0KaW5kZXgg
ODI2ODgxMWE2OTdlLi5kMDFlYjM1NjY5MmMgMTAwNjQ0DQotLS0gYS9pbmNsdWRlL2xpbnV4L2Nh
bi9yeC1vZmZsb2FkLmgNCisrKyBiL2luY2x1ZGUvbGludXgvY2FuL3J4LW9mZmxvYWQuaA0KQEAg
LTIzLDEwICsyMywxMyBAQA0KIHN0cnVjdCBjYW5fcnhfb2ZmbG9hZCB7DQogCXN0cnVjdCBuZXRf
ZGV2aWNlICpkZXY7DQogDQotCXVuc2lnbmVkIGludCAoKm1haWxib3hfcmVhZCkoc3RydWN0IGNh
bl9yeF9vZmZsb2FkICpvZmZsb2FkLCBzdHJ1Y3QgY2FuX2ZyYW1lICpjZiwNCisJdW5zaWduZWQg
aW50ICgqbWFpbGJveF9yZWFkKShzdHJ1Y3QgY2FuX3J4X29mZmxvYWQgKm9mZmxvYWQsDQorCQkJ
CSAgICAgc3RydWN0IHNrX2J1ZmYgKnNrYiwNCiAJCQkJICAgICB1MzIgKnRpbWVzdGFtcCwgdW5z
aWduZWQgaW50IG1iKTsNCiANCiAJc3RydWN0IHNrX2J1ZmZfaGVhZCBza2JfcXVldWU7DQorCXN0
cnVjdCBza19idWZmICpza2Jfb3ZlcmZsb3c7DQorDQogCXUzMiBza2JfcXVldWVfbGVuX21heDsN
CiANCiAJdW5zaWduZWQgaW50IG1iX2ZpcnN0Ow0KQEAgLTM0LDYgKzM3LDcgQEAgc3RydWN0IGNh
bl9yeF9vZmZsb2FkIHsNCiANCiAJc3RydWN0IG5hcGlfc3RydWN0IG5hcGk7DQogDQorCWJvb2wg
ZmRfZW5hYmxlOw0KIAlib29sIGluYzsNCiB9Ow0KIA0KLS0gDQoyLjE3LjENCg0K
